<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome</title>
  <link rel="stylesheet" href="./style/style.css">
</head>
<body>
  <header>
    <h1>Bienvenido</h1>
  </header>
  <form action="">
    <h2>Ingresa el nombre de un País</h2>
    <label for="">
      <input list="countries" placeholder="Nombre de un Pais">
      <datalist id="countries">
        
      </datalist>
    </label>
  </form>

  <div id="app"></div>
  <script >
    const API = 'https://travelbriefing.org/countries.json'

    const request = fetch(API)
      .then(response => response.json())
      .then(data => {
        data.forEach((item) => {
          const selectCountry = document.querySelector('#countries')
          const optionsCountries = document.createElement('option')
          optionsCountries.textContent = item.name
          selectCountry.append(optionsCountries)
        })
      })
      .then(() => {
        const referenceInput = document.querySelector('input')
          referenceInput.addEventListener('change', () => {
          const selectedCountry = document.querySelector('input').value

          const requestCountry = fetch(`https://travelbriefing.org/${selectedCountry}?format=json`)
          .then(response => response.json())
          .then(data => {
            /* Seccion presentacion País */
            const sectionPresentation = document.createElement('section')
            
            const nameCountry = document.createElement('h2')
            nameCountry.textContent = data.names.name

            const fullNameCountry = document.createElement('h3')
            fullNameCountry.textContent = data.names.full

            const neighbors = document.createElement('p')
            neighbors.textContent = `Other countries in the neighborhood of ${data.names.name} are ${data.neighbors.map((data) => data.name)}`

            sectionPresentation.append(nameCountry, fullNameCountry, neighbors)

            /* Fin Seccion Presentacion País */

            /* Inicio Seccion Consejo de Viaje */

            const sectionAdvise = document.createElement('section')

            const titleAdvise = document.createElement('h3')
            titleAdvise.textContent = 'Travel Advise'

            const firstAdvise = document.createElement('p')
            firstAdvise.textContent = data.advise.UA.advise

            const urlFirstAdvise = document.createElement('a')
            urlFirstAdvise.href = data.advise.UA.url
            urlFirstAdvise.target = '_blank'
            urlFirstAdvise.rel = 'noopener'
            urlFirstAdvise.textContent = 'Full report'

            // const secondAdvise = document.createElement('p')
            // // secondAdvise.textContent = data.advise.CA.url
            
            // if(data.advise.CA === undefined) {
            //     console.log('Hola Mundo para rellenar')
            //   } else {
            //     secondAdvise.textContent = data.advise.CA.advise
            //   }
              
            // const urlSecondAdvise = document.createElement('a')
            // urlSecondAdvise.href = console.log(data.advise.CA.url)
            // urlSecondAdvise.target = '_blank'
            // urlSecondAdvise.rel = 'noopener'
            // urlSecondAdvise.textContent = 'Full report'

            sectionAdvise.append(titleAdvise, firstAdvise, urlFirstAdvise)

            const container = document.createElement('div')
            container.append(sectionPresentation, sectionAdvise)

            const mainContainer = document.querySelector('#app')
            mainContainer.append(container)
          })
        })
        
      })
  </script>
</body>
</html>